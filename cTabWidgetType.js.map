{"version":3,"file":"cTabWidgetType.js","sourceRoot":"","sources":["cTabWidgetType.ts","settingsMenu.ts","weatherControls.ts","gridControls.ts","index.ts"],"names":[],"mappings":"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","sourcesContent":["export abstract class CTabWidget {\n\n    abstract getTemplateCore: () => string;\n\n    constructor(public id: number, public settings: baseSettings, public backgroundColor: string, public textColor: string) {\n    }\n\n\n    widgetTemplate: () => string = () => {\n        let template =\n            `<div class=\"item he${this.settings.height} w${this.settings.width}\">\n                        <div class=\"item-content\" ${this.colorInfo()}>\n${this.getHtmlControls()}\n<div class=\"ctab-widget-drag-handle hidden\" id=\"drag-handle-${this.id}\">\n<span style=\"top:0; left: 0;\">&#8598</span>\n<span style=\"top:0; right: 0;\">&#8599</span>\n<span style=\"bottom:0; right: 0;\">&#8600</span>\n<span style=\"bottom:0; left: 0;\">&#8601</span>\n</div>`;\n        template += this.getTemplateCore();\n        template += `</div></div>`;\n        return template;\n    };\n    getConfig = () => {\n        return {\n            settings: this.settings,\n            backgroundColor: this.backgroundColor,\n            textColor: this.textColor,\n            id: this.id,\n            type: this.constructor.name\n        };\n    };\n\n    colorInfo = (): string => {\n        return `style=\"color: var(--${this.id}-text-color);\n        background-color: var(--${this.id}-background-color);\n        --item-background-color:${this.backgroundColor};\n        \"`;\n    };\n    getHtmlControls = () =>\n        `<div class=\"ctab-widget-controls hidden\" id=\"controls-${this.id}\">\n                    <div class=\"deletebutton\">\n                        <button id=\"delete-${this.id}\" style=\"padding: 0; border: 0; background: transparent;\">‚ùå</button>\n                    </div>\n                    <div class=\"vanilla-color-picker widget-control-picker\" id=\"${this.id}-text-color\" style=\"color:var(--${this.id}-text-color); border-color: var(--${this.id}-text-color); background-color: rgba(255,255,255,.8)\">tc</div>\n                    <div class=\"vanilla-color-picker widget-control-picker\" id=\"${this.id}-background-color\" style=\"background-color: var(--${this.id}-background-color); border-color: var(--${this.id}-background-color);\">bg</div>\n                </div>`;\n}\n\nexport abstract class TitleWidget extends CTabWidget {\n    protected constructor(public id: number, public settings: titleSettings, public backgroundColor: string, public textColor: string) {\n        super(id, settings, backgroundColor, textColor);\n    };\n\n    getConfig = () => {\n\n        this.settings.title = (document.querySelector('#note-' + this.id) as HTMLTextAreaElement).value.replace(/\\s/g, '').trim();\n        return {\n            settings: this.settings,\n            backgroundColor: this.backgroundColor,\n            id: this.id,\n            textColor: this.textColor,\n            type: this.constructor.name\n        };\n    };\n}\n\n\nexport class WeatherWidget extends CTabWidget {\n    getTemplateCore = () => {\n        return `<div id=\"${this.id}\" class=\"ctab-widget-body\">\n                                        <input type=\"text\" id=\"${this.id}-cityInput\" style=\"width: 60%;float:left;\">\n                                        <button id=\"${this.id}-cityInputButton\" data-id=\"${this.id}\" style=\"font-size: 11px; width: 30%;float:left background-color: #eee; border-radius: 3px; border: 1px solid #ccc;\">Change<br> city</button>\n                                    <br>\n                                        <span id=\"${this.id}-output\" style=\"width: 100%; white-space: nowrap;\">Loading weather</span>\n                                    </div>`;\n    };\n\n    constructor(public id: number, public settings: weatherSettings, public backgroundColor: string, public textColor: string) {\n        super(id, settings, backgroundColor, textColor);\n    }\n}\n\nexport class LinkWidget extends TitleWidget {\n    constructor(public id: number, public settings: linkSettings, public backgroundColor: string, public textColor: string, public newTab: boolean) {\n        super(id, settings, backgroundColor, textColor);\n    }\n\n\n    private getTag = () => `<span style=\"line-height: 100%;\">${this.settings.title}</span>\n<a href=\"${this.settings.url}\" ${this.newTab ? 'target=\"_blank\"' : \"\"} id=\"${this.settings.title}\">\n    <span class=\"ctab-widget-link\"></span>\n</a>`;\n\n    getTemplateCore = () => {\n        return `<div id=\"${this.id}\" class=\"ctab-widget-body\"> \n                                        ${this.getTag()} \n                                    </div>`;\n    };\n\n    getConfig = () => {\n        return {\n            settings: this.settings,\n            backgroundColor: this.backgroundColor,\n            textColor: this.textColor,\n            id: this.id,\n            type: this.constructor.name\n        };\n    };\n}\n\nexport class ClockWidget extends CTabWidget {\n    getTemplateCore = () => {\n        return `<div id=\"${this.id}\" class=\"ctab-widget-body ctab-item-clock\"><span></span></div>`;\n    };\n\n    constructor(public id: number, public settings: baseSettings, public backgroundColor: string, public textColor: string) {\n        super(id, settings, backgroundColor, textColor);\n    }\n\n}\n\nexport class BuienradarWidget extends CTabWidget {\n    getTemplateCore = () => {\n        return `<div id=\"${this.id}\" class=\"ctab-widget-body\">\n                                        <IFRAME SRC=\"https://api.buienradar.nl/image/1.0/RadarMapNL?w=256&h=256\" NORESIZE SCROLLING=NO HSPACE=0 VSPACE=0 FRAMEBORDER=0 MARGINHEIGHT=0 MARGINWIDTH=0 WIDTH=256 HEIGHT=256></IFRAME>\n                                    </div>`;\n    };\n\n    constructor(public id: number, public settings: baseSettings, public backgroundColor: string, public textColor: string) {\n        super(id, settings, backgroundColor, textColor);\n    }\n}\n\nexport class NoteWidget extends TitleWidget {\n    getTemplateCore = () => {\n        return `<div id=\"${this.id}\" class=\"ctab-widget-body ctab-item-note\">\n                                        <textarea id=\"note-${this.id}\">${this.settings.title}</textarea>\n                                    </div>`;\n    };\n\n    constructor(public id: number, public settings: titleSettings, public backgroundColor: string, public textColor: string) {\n        super(id, settings, backgroundColor, textColor);\n    }\n}\n\n\nexport interface baseSettings {\n    width: number;\n    height: number;\n}\n\nexport interface weatherSettings extends baseSettings {\n    city: string;\n}\n\nexport interface titleSettings extends baseSettings {\n    title: string;\n}\n\nexport interface linkSettings extends titleSettings {\n    url: string;\n}\n\ninterface WidgetConstructor {\n    new (id: number, settings: baseSettings, backgroundColor: string, textColor: string): CTabWidget;\n}\n\nexport const cTabTypeMap: { [name: string]:  WidgetConstructor } = [BuienradarWidget, NoteWidget, ClockWidget, LinkWidget, WeatherWidget].reduce((acc, curr) => {\n    return acc[curr.name] = curr;\n}, {} as any);\n","import Picker from 'vanilla-picker';\n\ninterface CTabSettingsMenu {\n    initialize: () => void;\n    getWeatherTimeoutValue: () => number;\n    getTimezone: () => string;\n    getWeatherAPIKey: () => string;\n    getShowUnsavedWarning: () => boolean;\n    getNewTab: () => boolean;\n}\n\nlet CTabSettings = (): CTabSettingsMenu => {\n    const settingsToggleButton: HTMLButtonElement | null = document.querySelector('#settings-toggle');\n    const settingsPaneDiv: HTMLDivElement | null = document.querySelector('#settingsMenu');\n    const backgroundImg: HTMLImageElement | null = document.querySelector('#background');\n    const bgUrlVal: HTMLInputElement | null = document.querySelector('#background-url-value');\n\n    const weatherTimeoutInput: HTMLInputElement | null = document.querySelector('#weather-timeout');\n\n    let settingsActive: boolean = false;\n    const backgroundApplyButton: HTMLButtonElement | null = document.querySelector('#background-apply');\n    const settingsMainSaveButton: HTMLButtonElement | null = document.querySelector('#settings-main-save-button');\n    const unsavedChangesWarningCheckbox: HTMLInputElement | null = document.querySelector('#unsaved-changes-warning');\n    const openInNewTabCheckbox: HTMLInputElement | null = document.querySelector('#link-new-tab');\n    const weatherAPIKeyInput: HTMLInputElement | null = document.querySelector('#weather-API-key');\n    const timezoneSelect: HTMLSelectElement | null = document.querySelector('#timezone-select');\n\n    let currentSettings = JSON.parse((<any>window).localStorage.getItem('CTab-settings')) || {};\n\n\n    const initialize = function (): void {\n        // Color pickers\n        new Picker({\n            parent: document.getElementById('widget-border-color')!,\n            popup: 'bottom', // 'right'(default), 'left', 'top', 'bottom'\n            editor: true,\n            color: currentSettings.borderColor,\n            onChange: (newColor) => {\n                (<any>document).documentElement.style.setProperty('--widget-border-color', newColor.rgbaString);\n                currentSettings.borderColor = newColor.rgbaString;\n            },\n            onDone: (newColor) => {\n                currentSettings.borderColor = newColor.rgbaString;\n                save();\n            }\n        });\n\n        new Picker({\n            parent: document.getElementById('background-color-picker')!,\n            popup: 'bottom', // 'right'(default), 'left', 'top', 'bottom'\n            editor: true,\n            color: currentSettings.backgroundColor,\n            onChange: (newColor) => {\n                (<any>document).documentElement.style.setProperty('--background-color', newColor.rgbaString);\n                currentSettings.backgroundColor = newColor.rgbaString;\n            },\n            onDone: (newColor) => {\n                currentSettings.backgroundColor = newColor.rgbaString;\n                save();\n            }\n        });\n\n        (<any>document).documentElement.style.setProperty('--widget-border-color', currentSettings.borderColor);\n\n        backgroundImg!.src = currentSettings.background;\n        if (typeof currentSettings.backgroundRadioSelected === 'number') {\n            (<HTMLInputElement>document.getElementsByName('background')[currentSettings.backgroundRadioSelected]).checked = true;\n            if (currentSettings.backgroundRadioSelected === 2) {\n                bgUrlVal!.value = currentSettings.background;\n            }\n        }\n\n        unsavedChangesWarningCheckbox!.checked = currentSettings.unsavedChangesWarningEnabled || false;\n        unsavedChangesWarningCheckbox!.addEventListener('click', () => {\n            currentSettings.unsavedChangesWarningEnabled = unsavedChangesWarningCheckbox!.checked;\n            save();\n        });\n\n        openInNewTabCheckbox!.checked = currentSettings.openInNewTab || false;\n        openInNewTabCheckbox!.addEventListener('click', () => {\n            currentSettings.openInNewTab = openInNewTabCheckbox!.checked;\n            save();\n        });\n\n        weatherAPIKeyInput!.value = currentSettings.weatherAPIKey || \"\";\n        weatherAPIKeyInput!.addEventListener('change', () => {\n            currentSettings.weatherAPIKey = weatherAPIKeyInput!.value;\n            save();\n        });\n\n\n        // weather timeout\n        weatherTimeoutInput!.value = currentSettings.weatherTimeout || 60 * 15;\n        weatherTimeoutInput!.addEventListener('change', () => {\n            currentSettings.weatherTimeout = weatherTimeoutInput!.value;\n            save();\n        });\n\n        // Timezone\n        timezoneSelect!.selectedIndex = currentSettings.timezoneIndex || 421; //default to Europe/Amsterdam\n        timezoneSelect!.addEventListener('change', () => {\n            currentSettings.timezone = timezoneSelect!.options[timezoneSelect!.selectedIndex].innerText;\n            currentSettings.timezoneIndex = timezoneSelect!.selectedIndex;\n            save();\n        });\n    };\n\n    function getBackgroundSetting(): void {\n        let selectedBackgroundOption: string = \"\";\n        let backgroundOptions: NodeListOf<HTMLElement> | null = document.getElementsByName('background');\n        for (let i = 0, length = backgroundOptions!.length; i < length; i++) {\n            if ((<HTMLInputElement>backgroundOptions![i]).checked) {\n                selectedBackgroundOption = (<HTMLInputElement>backgroundOptions![i]).value;\n                currentSettings.backgroundRadioSelected = i;\n                break;\n            }\n        }\n\n        switch (selectedBackgroundOption) {\n            case 'file':\n                const convertToBase64 = function (file: File, callback: (result: string | ArrayBuffer | null, error: DOMException | null) => any) {\n                    let reader = new FileReader();\n                    reader.onloadend = function () {\n                        callback(reader.result, reader.error);\n                    };\n                    reader.readAsDataURL(file);\n                };\n\n                const backgroundFileInput: HTMLInputElement | null = document.querySelector(\"#background-file-value\");\n                let selectedFile = backgroundFileInput!.files![0];\n                // check if a file is selected\n                if (selectedFile) {\n                    convertToBase64(selectedFile, function (base64) {\n                        currentSettings.background = base64;\n                        backgroundImg!.src = currentSettings.background;\n                    });\n                }\n                break;\n            case 'url':\n                let backgroundUrlValue = bgUrlVal!.value;\n                currentSettings.background = backgroundUrlValue;\n                break;\n            case 'color':\n                currentSettings.background = \"\";\n                break;\n            case 'random':\n            default:\n                currentSettings.background = \"https://source.unsplash.com/random/1920x1080\";\n                break;\n        }\n        backgroundImg!.src = currentSettings.background;\n        save();\n    }\n\n    function save(): void {\n        window.localStorage.setItem('CTab-settings', JSON.stringify(currentSettings));\n    }\n\n\n    settingsMainSaveButton!.addEventListener('click', () => {\n        save();\n    });\n    backgroundApplyButton!.addEventListener('click', () => {\n        getBackgroundSetting();\n        // reload to let gridcontrols use new settings;\n    });\n\n    settingsToggleButton!.addEventListener('click', () => settingsToggle());\n\n\n    function settingsToggle(): void {\n        settingsActive = !settingsActive;\n        settingsActive ? settingsPaneDiv!.classList.remove('hidden') : settingsPaneDiv!.classList.add('hidden');\n    }\n\n    const getWeatherTimeoutValue = function (): number {\n        return currentSettings.weatherTimeout * 1000;\n    };\n\n    const getTimezone = function () {\n        return currentSettings.timezone;\n    };\n\n    const getWeatherAPIKey = function () {\n        return currentSettings.weatherAPIKey;\n    };\n\n    const getShowUnsavedWarning = function () {\n        return currentSettings.unsavedChangesWarningEnabled;\n    };\n\n    const getNewTab = function () {\n        return currentSettings.openInNewTab;\n    };\n\n    return {\n        initialize: initialize,\n        getWeatherTimeoutValue: getWeatherTimeoutValue,\n        getTimezone: getTimezone,\n        getWeatherAPIKey: getWeatherAPIKey,\n        getShowUnsavedWarning: getShowUnsavedWarning,\n        getNewTab: getNewTab\n    };\n};\n\nexport default CTabSettings();\n","import CTabSettings from \"./settingsMenu\";\nimport {WeatherWidget} from \"./cTabWidgetType\";\n\nconst defaultWeatherTimeout = 1000 * 60 * 15;\n\ninterface OpenWeatherMapData {\n    weather: OpenWeatherMapWeather[];\n    main: {\n        temp: number;\n        pressure: number;\n        humidity: number;\n        temp_min: number;\n        temp_max: number;\n    };\n    base: string;\n    name: string;\n}\n\ninterface weatherDataSave extends OpenWeatherMapData {\n    retrievedAt: number;\n}\n\ninterface OpenWeatherMapWeather {\n    id: number;\n    main: string;\n    description: string;\n}\n\n// Retrieves the past information on weather from the local storage\nlet knownWeather: { [city: string]: weatherDataSave; } = JSON.parse(window.localStorage.getItem('weatherInfo') || '{}');\n\n// Dictionary of weather type to emoji\nlet weatherEmoji: { [weatherType: string]: string; } = {\n    \"Mist\": \"üåÅ\",\n    \"Haze\": \"üå´Ô∏è\",\n    \"Snow\": \"‚õÑ\",\n    \"Rain\": \"‚òî\",\n    \"Clouds\": \"‚õÖ\",\n    \"Thunderstorm\": \"‚ö°\",\n    \"Clear\": \"üåû\",\n    \"Moon\": \"üåú\",\n    \"Windy\": \"‚õµ\",\n    \"Drizzle\": \"üå¶\",\n    \"Error\": \"‚ùå\",\n    \"Fog\": \"üå´Ô∏è\"\n};\n\nlet tempFormat = (data: OpenWeatherMapData): string => {\n    if (data.weather) {\n        console.log(\"Weather type(s)\", data.weather.reduce((acc, curr) => acc + \" - \" + curr.main, \"\"));\n        let curTemp = (data.main.temp - 273.15).toFixed(2);\n        let curWeather = data.weather.reduce((acc, weatherType: OpenWeatherMapWeather) => {\n            if (weatherEmoji.hasOwnProperty(weatherType.main)) {\n                return acc + weatherEmoji[weatherType.main];\n            }\n            return acc + weatherEmoji.Error;\n        }, \"\");\n        return `${curWeather} ${curTemp}¬∞C`;\n    }\n    return \"invalid key\";\n};\n\nexport const getWeather = (id: number, city: string) => {\n\n    let weatherOutputElem: HTMLElement | null = document.getElementById(id + '-output');\n    let weatherTimeout = CTabSettings.getWeatherTimeoutValue() || defaultWeatherTimeout;\n    if (knownWeather && knownWeather.hasOwnProperty(city) && (new Date().getTime() - knownWeather[city].retrievedAt) < weatherTimeout) {\n\n        if (weatherOutputElem !== null) {\n            weatherOutputElem.innerText = tempFormat(knownWeather[city]);\n        }\n    } else {\n        city = city === \"\" ? \"delft\" : city;\n        const apiKey = CTabSettings.getWeatherAPIKey();\n        fetch(`http://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}`).then(response =>\n            response.json().then(data => ({\n                    data: data,\n                    status: response.status\n                })\n            ).then(res => {\n                knownWeather[city] = res.data;\n                knownWeather[city].retrievedAt = new Date().getTime();\n                window.localStorage.setItem('weatherInfo', JSON.stringify(knownWeather));\n                if (weatherOutputElem !== null) {\n                    weatherOutputElem.innerText = tempFormat(res.data);\n                }\n            })).catch((err) => {\n            console.log(err);\n            if (weatherOutputElem!== null) {\n                weatherOutputElem.innerText = weatherEmoji.Error + \"no (valid) key\";\n            }\n        });\n    }\n};\n\n\n// Export this function\nexport function addWeatherListener(widget: WeatherWidget, id: number): void {\n    const cityButton = document.getElementById(id + '-cityInputButton');\n    if (cityButton) {\n        cityButton.addEventListener('click', () => {\n            const cityNameInput: HTMLElement | null = document.getElementById(id + '-cityInput');\n            if (cityNameInput !== null) {\n                let city = (<HTMLInputElement>cityNameInput).value;\n                widget.settings.city = city;\n                getWeather(id, city);\n            }\n        });\n    } else {\n        console.log(\"Could not find the 'change' button corresponding to widget\", id);\n    }\n}\n","\"use strict\";\n/* eslint-env node, browser, jquery */\nimport {baseSettings} from \"./cTabWidgetType\";\n\n(<any>window).browser = (() => {\n    return (<any>window).browser || (<any>window).chrome || (<any>window).msBrowser;\n})();\n\nconst styleElem = (<any>document).head.appendChild(document.createElement('style'));\n\n\nimport CTabSettings from \"./settingsMenu\";\nimport * as CTabWidgetTypes from './cTabWidgetType';\nimport Picker from 'vanilla-picker';\nimport 'modules/jquery.textfill.min.js';\nimport * as $ from 'jquery';\nimport * as weatherEl from './weatherControls';\n\n\n// grid return object\ninterface CTabGrid {\n    initialize: () => void;\n    saveGrid: () => string;\n    simpleAdd: (type: string, settings: baseSettings, backgroundColor: string, textColor: string) => void;\n    debug: (sampleConfig: boolean, addSampleWidgets: boolean) => void;\n\n    // todo define config as type\n    setConfig: (config: any[]) => void;\n    getConfig: () => object[];\n}\n\nfunction grid(): CTabGrid {\n    let grid: any;\n    let widgets: CTabWidgetTypes.CTabWidget[] = [];\n    let widgetColorPickerOpen: boolean = false;\n    let dirty: boolean = false;\n    const options = {\n        // Muuri options\n        dragEnabled: true,\n        layoutOnInit: false,\n        layout: {\n            fillGaps: false,\n            horizontal: false,\n            alignRight: false,\n            alignBottom: false,\n            rounding: false\n        },\n        sortData: {\n            id: function (item: any, _element: any) {\n                return parseFloat(item._id);\n            },\n            title: function (_item: any, element: any) {\n                const ctabBody: any = [].slice.call(element.children[0].children).filter((el: HTMLElement) => el.classList.contains(\"ctab-widget-body\"))[0];\n                if (ctabBody.classList.contains('ctab-item-clock')) {\n                    return \"ZZZ\";\n                }\n                if (ctabBody.classList.contains('ctab-item-note')) {\n                    return \"ZZZ\";\n                }\n                return ctabBody.children[0].innerText.toUpperCase();\n            }\n        }\n    };\n\n    const initialize = function (): void {\n        const muuriCopy = (window as any).Muuri;\n        grid = new muuriCopy(\".grid\", options);\n        load();\n\n\n        // Save whenever you leave the screen\n        // TODO: fix with muuri\n        // @ts-ignore - no return for not showing a before-unload alert\n        window.onbeforeunload = function () {\n            // dirty state is implemented loosely (did not care much before, dirty in the probability of change)\n            // so an extra check is also added comparing the current state to the saved state\n            if (hasChanges() && CTabSettings.getShowUnsavedWarning()) {\n                return \"You have unsaved changes on this page. Do you want to leave this page and discard your changes or stay on this page?\";\n            }\n            // service.saveGrid(); // Disabled to enable dev edit\n        };\n\n\n        // TODO: fix with muuri\n        // service.grid.on(\"change\", function (event, items) {\n        //     dirty = true;\n        //     // When you change the title of a widget, a gridstack onChange event is retrieved with\n        //     // items === 'undefined'.\n        //     if (typeof items !== 'undefined') {\n        //         for (let i = 0; i < items.length; i++) {\n        //             if (items[i].id in service.widgets) {\n        //                 service.update(items[i].id, items[i]);\n        //                 // Call to textfill library, dynamically adapting the font size\n        //                 $('#' + items[i].id).textfill({\n        //                     minFontPixels: 10,\n        //                     allowOverflow: true,\n        //                 });\n        //             }\n        //         }\n        //     }\n        // });\n\n        // Call to textfill library, calculate font sizes that make the text fit in the boxes.\n        widgets.forEach(i => ($('#' + i.id) as any).textfill({\n            minFontPixels: 12,\n            allowOverflow: true,\n        }));\n        // Start clocks\n        startTime();\n        document.querySelectorAll(\".ctab-item-note\").forEach(note => {\n            note.addEventListener('change', noteChanged);\n            note.addEventListener('keyup', noteChanged);\n        });\n        // Set dirty to false, since note widgets might have set the state to dirty\n        dirty = false;\n\n        ($('.ctab-item-clock') as any).textfill({\n            minFontPixels: 10,\n            allowOverflow: true,\n        });\n    };\n\n    const getConfig = () => {\n        let lsConfig = window.localStorage.getItem(\"CTabConfig\") || \"{}\";\n        let config = [];\n        try {\n            config = JSON.parse(lsConfig);\n        } catch (error) {\n            console.error(`Config could not be parsed, found configuration:`, lsConfig);\n            console.error(error);\n        }\n        return config;\n    };\n\n    const setConfig = (config: any[]) =>  {\n        if (config.length >= 1)\n            window.localStorage.setItem(\"CTabConfig\", JSON.stringify(config));\n        else {\n            console.log(\"config too small\", config);\n        }\n    };\n    // Returns message if save call is executed or not\n    const saveGrid = () => {\n        if (hasChanges()) {\n            service.setConfig(getDashboardConfig());\n            dirty = false;\n            return \"Configuration saved!\";\n        } else {\n            return \"nothing to save\";\n        }\n    };\n\n    const debug = (sampleConfig: boolean, addSampleWidgets: boolean) =>  {\n        console.log(\"debug:\");\n        if (sampleConfig) {\n            console.log(\"using sample config\");\n            let sampleConfiguration = [{\n                settings: {\"width\": 2, \"height\": 2, title: \"github\"},\n                contentUrl: 'https://www.github.com',\n                newTab: CTabSettings.getNewTab()\n            }];\n            service.setConfig(sampleConfiguration);\n        }\n        if (addSampleWidgets) {\n            addWidgetToGrid(new CTabWidgetTypes.LinkWidget(widgets.length, {\n                width: 1,\n                height: 1,\n                title: \"hallo!\", url: \"https://github.com\"\n            }, \"rgba(255,255,255,0.5)\", \"rgba(0,0,0,1)\", CTabSettings.getNewTab()));\n        }\n    };\n\n    const simpleAdd = function (type: string, settings: baseSettings, backgroundColor: string, textColor: string) {\n        addWidgetToGrid(\n            new CTabWidgetTypes.cTabTypeMap[type](widgets.length, settings, backgroundColor, textColor));\n    };\n\n    // Define return object\n    let service: CTabGrid = {\n        initialize: initialize,\n        saveGrid: saveGrid,\n        simpleAdd: simpleAdd,\n        debug: debug,\n        setConfig: setConfig,\n        getConfig: getConfig\n    };\n\n    const toggleWidgetColorPicker = (isOpen: boolean): void => {\n        widgetColorPickerOpen = isOpen;\n    };\n\n    const noteChanged = () => {\n        dirty = true;\n    };\n\n    const hasChanges = () => {\n        let saved = service.getConfig();\n        let current = getDashboardConfig();\n        // compare strings since object compare is always different with ==\n        if (JSON.stringify(saved) !== JSON.stringify(current)) {\n            if (dirty) {\n                return true;\n            }\n            console.log(\"Changes exist but dirty is false\");\n            return true;\n        }\n        return false;\n    };\n\n    const removeWidget = function (id: number) {\n        // Get the outer muuri cell\n        let innerId = document.getElementById(id.toString());\n        let cell = innerId!.parentElement!.parentElement;\n\n        if (cell) {\n            // remove from the grid (ui only)\n            grid.remove([cell], {removeElements: true, layout: true});\n\n            // also remove from widgets, otherwise no changes will be detected on saving.\n            delete widgets[id];\n        }\n    };\n\n    const addWidgetToGrid = function (widget: any) {\n        let itemElem = document.createElement('div');\n        itemElem.innerHTML = widget.widgetTemplate();\n\n        let textColOpen = false;\n\n        itemElem.firstChild!.addEventListener('mouseover', () => {\n            if (!widgetColorPickerOpen) {\n                const controlPanel = document.getElementById(`controls-${widget.id}`)!;\n                const controlDragHandle = document.getElementById(`drag-handle-${widget.id}`)!;\n                const biggerZIndex = \"4\";\n\n                controlPanel.classList.remove('hidden');\n                controlDragHandle.classList.remove('hidden');\n                controlPanel.style.zIndex = biggerZIndex;\n                controlPanel.parentElement!.style.zIndex = biggerZIndex;\n                controlPanel.parentElement!.parentElement!.style.zIndex = biggerZIndex;\n            }\n        });\n\n\n        itemElem!.firstChild!.addEventListener('mouseout', () => {\n            if (!textColOpen) {\n                const controlPanel = document.getElementById(`controls-${widget.id}`)!;\n                const controlDragHandle = document.getElementById(`drag-handle-${widget.id}`)!;\n                const smallerZIndex = \"1\";\n                controlPanel.style.zIndex = smallerZIndex;\n                controlPanel.parentElement!.style.zIndex = smallerZIndex;\n                controlPanel.parentElement!.parentElement!.style.zIndex = smallerZIndex;\n                controlPanel.classList.add('hidden');\n                controlDragHandle.classList.add('hidden');\n            }\n        });\n        grid.add(itemElem.firstChild, {index: widget.id});\n\n        new Picker({\n            parent: document.getElementById(`${widget.id}-text-color`)!,\n            popup: 'right', // 'right'(default), 'left', 'top', 'bottom'\n            editor: false,\n            color: widget.textColor || '#000000',\n            onChange: (newCol) => {\n                (document as any).documentElement.style.setProperty(`--${widget.id}-text-color`, newCol.rgbaString);\n                widget.textColor = newCol.rgbaString;\n            },\n            onDone: (newCol) => {\n                widget.textColor = newCol.rgbaString;\n            },\n            onOpen: () => {\n                toggleWidgetColorPicker(true);\n                textColOpen = true;\n            },\n            onClose: () => {\n                toggleWidgetColorPicker(false);\n                textColOpen = false;\n            }\n        });\n        new Picker({\n            parent: document.getElementById(`${widget.id}-background-color`)!,\n            popup: 'right', // 'right'(default), 'left', 'top', 'bottom'\n            editor: false,\n            color: widget.backgroundColor || '#000000',\n            onChange: (newCol) => {\n                (document as any).documentElement.style.setProperty(`--${widget.id}-background-color`, newCol.rgbaString);\n\n                let widgetElement = document.getElementById(`${widget.id}`);\n                if (widgetElement) {\n                    widgetElement.style.setProperty(`--item-background-color`, newCol.rgbaString);\n                    styleElem.innerHTML = `#${widget.id}:before {background-color: ${newCol.rgbaString}`;\n                }\n                widget.backgroundColor = newCol.rgbaString;\n            },\n            onDone: (newCol) => {\n                widget.backgroundColor = newCol.rgbaString;\n            },\n            onOpen: () => {\n                toggleWidgetColorPicker(true);\n                textColOpen = true;\n            },\n            onClose: () => {\n                toggleWidgetColorPicker(false);\n                textColOpen = false;\n            }\n        });\n\n\n        document.getElementById(`delete-${widget.id}`)!.addEventListener('click', () => removeWidget(widget.id));\n\n\n        if (widget.type === 'weather') {\n            widget.settings.width = widget.settings.width > 1 ? widget.settings.width : 2;\n            widget.settings.height = widget.settings.height > 1 ? widget.settings.height : 2;\n            widget.settings.city = widget.settings.city ? widget.settings.city : \"delft\";\n            setTimeout(() => {\n                weatherEl.addWeatherListener(widget, widget.id);\n                (document.getElementById(widget.id + '-cityInput') as HTMLInputElement).value = widget.settings.city;\n                weatherEl.getWeather(widget.id, widget.settings.city);\n            }, 100);\n        }\n    };\n\n\n\n    const getDashboardConfig = function () {\n        return widgets.map(widget => widget.getConfig());\n    };\n\n\n    // Loads the user configuration in the dashboard\n    const load = function () {\n        loadModel();\n        loadGrid();\n    };\n\n\n    const loadModel = function () {\n        let widgetData: any = service.getConfig();\n        widgets = [];\n        widgetData = Array.isArray(widgetData) ? widgetData : [];\n\n        widgets = widgetData.map((widget: any) => new CTabWidgetTypes.cTabTypeMap[widget.type](widget.id, widget.settings, widget.backgroundColor, widget.textColor));\n\n    };\n\n    const loadGrid = function () {\n        // add the widgets to the grid\n        for (let key in widgets) {\n            if (widgets.hasOwnProperty(key)) {\n                let widget = widgets[key];\n                addWidgetToGrid(widget);\n            }\n        }\n\n    };\n\n    return service;\n\n}\n\n\n// Independent functions\n// From w3 to add clock\nfunction startTime() {\n    let clocks = document.querySelectorAll('.ctab-item-clock');\n    if (clocks.length > 0) {\n        const todayDate = new Date();\n        const timezone = CTabSettings.getTimezone();\n        const today = todayDate.toLocaleTimeString('en-US', {\n            hour: '2-digit',\n            minute: '2-digit',\n            second: '2-digit',\n            timeZone: timezone,\n            hour12: false\n        });\n        clocks.forEach(a => a.children[0].innerHTML = today);\n        setTimeout(startTime, 500);\n    }\n}\n\nexport default grid;\n","import grid from './gridControls';\nimport './settingsMenu';\nimport * as CtabWidgetTypes from './cTabWidgetType';\n\n(<any>window).browser = (() => {\n    return (<any>window).browser || (<any>window).chrome || (<any>window).msBrowser;\n})();\n\n\n// The toast box that can be used to show a message to the user.\nconst toastBox: HTMLElement | null = document.querySelector(\"#toast\");\nconst today = new Date();\nconst weekdays = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\nconst months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\nconst dateField: HTMLElement = document.querySelector('#currDate') as HTMLElement;\n    dateField.innerText = `${weekdays[today.getDay()]} ${today.getDate()} ${months[today.getMonth()]} ${today.getFullYear()}`;\n\nfunction showToast(message: string): void {\n    if (toastBox !== null) {\n        toastBox.innerText = message;\n        toastBox.classList.remove('hidden');\n        setTimeout(() => {\n            toastBox.classList.add(\"hidden\");\n        }, 2000);\n    }\n}\n\n\nlet CTabGrid = grid();\nCTabGrid.initialize();\n\n// Save the grid and show the result to user using toastBox.\nfunction saveGrid(): void {\n    const saveResult = CTabGrid.saveGrid();\n    showToast(saveResult);\n}\n\n\nconst saveButton: HTMLButtonElement = document.querySelector(\"#saveButton\") as HTMLButtonElement;\n    saveButton.addEventListener('click', saveGrid);\n\n\n/// Adding Widgets\nconst widgetTypeChanger: HTMLSelectElement = document.querySelector(\"#typeDropdown\") as HTMLSelectElement;\n\n// Show or hide the title and url input fields in the simple add area.\nfunction widgetTypeFieldVisibilityControl(showTitle: boolean, showUrl: boolean): void {\n    const hiddenClassName = \"hidden\";\n    let title = document.querySelector(\"#addTitle\");\n    let titleLabel = document.querySelector(\"#titleLabel\");\n    let url = document.querySelector(\"#addUrl\");\n    let urlLabel = document.querySelector(\"#urlLabel\");\n    if (title !== null && titleLabel !== null && url !== null && urlLabel !== null) {\n        let titleClassList = title.classList;\n        let titleLabelClassList = titleLabel.classList;\n        let urlClassList = url.classList;\n        let urlLabelClassList = urlLabel.classList;\n        if (showTitle) {\n            titleClassList.remove(hiddenClassName);\n            titleLabelClassList.remove(hiddenClassName);\n        } else {\n            titleClassList.add(hiddenClassName);\n            titleLabelClassList.add(hiddenClassName);\n        }\n        if (showUrl) {\n            urlClassList.remove(hiddenClassName);\n            urlLabelClassList.remove(hiddenClassName);\n        } else {\n            urlClassList.add(hiddenClassName);\n            urlLabelClassList.add(hiddenClassName);\n        }\n    }\n}\n\n\nif (widgetTypeChanger !== null) {\n    widgetTypeChanger.addEventListener('change', () => {\n        const curVal = widgetTypeChanger.value;\n\n        if (curVal === \"link\") {\n            widgetTypeFieldVisibilityControl(true, true);\n        }\n        if (curVal === \"buienradar\") {\n            widgetTypeFieldVisibilityControl(false, false);\n        }\n        if (curVal === \"clock\") {\n            widgetTypeFieldVisibilityControl(false, false);\n        }\n        if (curVal === \"note\") {\n            widgetTypeFieldVisibilityControl(true, false);\n        }\n        if (curVal === \"weather\") {\n            widgetTypeFieldVisibilityControl(false, false);\n        }\n    });\n}\n\n// New Add button\nconst addMenu: HTMLElement | null = document.querySelector('#addMenu');\nconst floatingAddButton: HTMLButtonElement | null = document.querySelector('#floatingAddButton');\nconst addCancelButton: HTMLButtonElement | null = document.querySelector('#addCancelButton');\nconst widgetAddButton: HTMLButtonElement | null = document.querySelector('#widgetAddButton');\n\n// Add the configured widget to the dashboard\nfunction addWidget(): void {\n    let title: HTMLInputElement | null = document.querySelector(\"#addTitle\");\n    let url: HTMLInputElement | null = document.querySelector(\"#addUrl\");\n    let bgcolor: HTMLInputElement | null = document.querySelector('#addBGC');\n    let textcolor: HTMLInputElement | null = document.querySelector('#addTC');\n\n    if (title !== null && url !== null && bgcolor !== null && textcolor !== null && widgetTypeChanger !== null && (title.value !== \"\" || widgetTypeChanger.value === \"clock\" || widgetTypeChanger.value === \"weather\" || widgetTypeChanger.value === \"buienradar\")) {\n        CTabGrid.simpleAdd(widgetTypeChanger.value, {width: 1, height: 1}, bgcolor.value, textcolor.value);\n        title.value = \"\";\n        url.value = \"\";\n\n        // Trigger hiding of the add window\n        if (addCancelButton !== null) {\n            addCancelButton.click();\n        }\n    } else {\n        showToast(\"Unable to add widget: A title is required.\");\n    }\n}\n\nif (addMenu !== null) {\n    addMenu.classList.add('hidden');\n}\nif (widgetAddButton !== null && floatingAddButton !== null && addMenu !== null && addCancelButton !== null) {\n    widgetAddButton.addEventListener('click', addWidget);\n    floatingAddButton.addEventListener('click', () => {\n        floatingAddButton.classList.add('hidden');\n        addMenu.classList.remove('hidden');\n    });\n    addCancelButton.addEventListener('click', () => {\n        floatingAddButton.classList.remove('hidden');\n        addMenu.classList.add('hidden');\n    });\n}\n\n// Accept the 'Enter' key as alternative to clicking on the 'Add' button with the mouse, when interacting with the 'addMenu'.\n// Doesn't work for the background/text backgroundColor selectors as the browser seems to override the 'Enter' key for it (i.e. opens the backgroundColor palette).\n['#typeDropdown', '#addTitle', '#addUrl', '#widgetAddButton'].forEach((item) => {\n    const itemElem: HTMLElement | null = document.querySelector(item);\n    if (itemElem !== null) {\n        itemElem.addEventListener('keydown', (e) => {\n            if (e.key === \"Enter\") {\n                addWidget();\n            }\n        });\n    }\n});\n\n\n/// Dev mode\nconst devConfigBox: HTMLDivElement | null = document.querySelector(\"#devConfig\");\nconst clearButton: HTMLButtonElement | null = document.querySelector(\"#clearButton\");\nconst debugButton: HTMLButtonElement | null = document.querySelector(\"#debugButton\");\nconst backupButton: HTMLButtonElement | null = document.querySelector(\"#backupButton\");\nconst devEnabledCheckbox: HTMLInputElement | null = document.querySelector(\"#devEnabled\");\nconst devOpacityButton: HTMLButtonElement | null = document.querySelector(\"#opacityButton\");\nconst configField: HTMLInputElement | null = document.querySelector(\"#configFieldInput\");\nconst devSaveButton: HTMLButtonElement | null = document.querySelector(\"#saveDevConfig\");\n//TODO: const loadBackupButton: HTMLButtonElement | null = document.querySelector('#loadBackupButton');\n\n// Show or hide developer mode specific buttons\nfunction devSwitch(displayStyle: string): void {\n    if (devConfigBox && clearButton && debugButton) {\n        devConfigBox.style.display = displayStyle;\n        devConfigBox.classList.remove(\"hidden\");\n        clearButton.style.display = displayStyle;\n        debugButton.style.display = displayStyle;\n    }\n    // document.querySelector(\"#widescreenButton\").style.display = displayStyle;\n}\n\n\n// disable dev mode by default\ndevSwitch('none');\n    clearButton!.addEventListener('click', () => CTabGrid.debug(true, false));\n    debugButton!.addEventListener('click', () => CTabGrid.debug(false, true));\n    backupButton!.addEventListener('click', saveCurrentConfig);\n    devEnabledCheckbox!.addEventListener('change', (a) => {\n        if (a !== null && a.srcElement !== null)\n            if ((<HTMLInputElement>a.srcElement).checked) {\n                devSwitch('block');\n            } else {\n                devSwitch('none');\n            }\n    });\n\ndevSaveButton!.addEventListener('click', () => {\n    let config = JSON.parse(configField!.value);\n    CTabGrid.setConfig(config);\n});\ndevOpacityButton!.addEventListener('click', () => {\n    let config = configField!.value;\n    configField!.value = config.replace(/(backgroundColor\":\"rgba\\([0-9]+,[0-9]+,[0-9]+,)([0-9.]+)((?=\\)\"))/gm, \"$1 0.5$3\");\n\n});\n\nconfigField!.value = prettyPrintConfig(CTabGrid.getConfig());\n\nconst streamSaver = (window as any).steamSaver;\n\nfunction saveCurrentConfig() {\n    const fileStream = streamSaver.createWriteStream('config.json');\n    const writer = fileStream.getWriter();\n    const encoder = new TextEncoder;\n    let data = JSON.stringify(CTabGrid.getConfig());\n    let uint8array = encoder.encode(data + \"\\n\\n\");\n\n    writer.write(uint8array);\n    writer.close();\n}\n\nfunction prettyPrintConfig(config: any): string {\n    if (config) {\n        let result = \"[\";\n        for (let i = 0; i < config.length; i++) {\n            result += i === 0 ? \"\\n\\t\" : \",\\n\\t\";\n            result += JSON.stringify(config[i]);\n        }\n        return result + \"\\n]\";\n    }\n    return \"\";\n}\n\n\n/// Chrome extension specific\ntry {\n    (<any>window).browser.commands.onCommand.addListener(saveGrid);\n\n    (<any>window).browser.bookmarks.onCreated.addListener(function (id: any, bookmark: any) {\n        console.log(\"id\", id);\n        console.log(\"bookmark\", bookmark);\n        CTabGrid.simpleAdd(\"LinkWidget\", {width: 1, height: 1, title: (bookmark.title as string), url: (bookmark.url as string)} as CtabWidgetTypes.linkSettings,\"#fff\", \"#000\");\n\n    });\n} catch (e) {\n    // not on chrome\n    console.log(\"Did not execute chrome extension specific code\");\n}\n"]}