{"version":3,"file":"cTabWidgetType.js","sourceRoot":"","sources":["cTabWidgetType.ts"],"names":[],"mappings":"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","sourcesContent":["export abstract class CTabWidget {\n\n    abstract getTemplateCore: () => string;\n\n    constructor(public id: number, public settings: baseSettings, public backgroundColor: string, public textColor: string) {\n    }\n\n\n    widgetTemplate: () => string = () => {\n        let template =\n            `<div class=\"item he${this.settings.height} w${this.settings.width}\">\n                        <div class=\"item-content\" ${this.colorInfo()}>\n${this.getHtmlControls()}\n<div class=\"ctab-widget-drag-handle hidden\" id=\"drag-handle-${this.id}\">\n<span style=\"top:0; left: 0;\">&#8598</span>\n<span style=\"top:0; right: 0;\">&#8599</span>\n<span style=\"bottom:0; right: 0;\">&#8600</span>\n<span style=\"bottom:0; left: 0;\">&#8601</span>\n</div>`;\n        template += this.getTemplateCore();\n        template += `</div></div>`;\n        return template;\n    };\n    getConfig = () => {\n        return {\n            settings: this.settings,\n            backgroundColor: this.backgroundColor,\n            textColor: this.textColor,\n            id: this.id,\n            type: this.constructor.name\n        };\n    };\n\n    colorInfo = (): string => {\n        return `style=\"color: var(--${this.id}-text-color);\n        background-color: var(--${this.id}-background-color);\n        --item-background-color:${this.backgroundColor};\n        \"`;\n    };\n    getHtmlControls = () =>\n        `<div class=\"ctab-widget-controls hidden\" id=\"controls-${this.id}\">\n                    <div class=\"deletebutton\">\n                        <button id=\"delete-${this.id}\" style=\"padding: 0; border: 0; background: transparent;\">‚ùå</button>\n                    </div>\n                    <div class=\"vanilla-color-picker widget-control-picker\" id=\"${this.id}-text-color\" style=\"color:var(--${this.id}-text-color); border-color: var(--${this.id}-text-color); background-color: rgba(255,255,255,.8)\">tc</div>\n                    <div class=\"vanilla-color-picker widget-control-picker\" id=\"${this.id}-background-color\" style=\"background-color: var(--${this.id}-background-color); border-color: var(--${this.id}-background-color);\">bg</div>\n                </div>`;\n}\n\nexport abstract class TitleWidget extends CTabWidget {\n    protected constructor(public id: number, public settings: titleSettings, public backgroundColor: string, public textColor: string) {\n        super(id, settings, backgroundColor, textColor);\n    };\n\n    getConfig = () => {\n\n        this.settings.title = (document.querySelector('#note-' + this.id) as HTMLTextAreaElement).value.replace(/\\s/g, '').trim();\n        return {\n            settings: this.settings,\n            backgroundColor: this.backgroundColor,\n            id: this.id,\n            textColor: this.textColor,\n            type: this.constructor.name\n        };\n    };\n}\n\n\nexport class WeatherWidget extends CTabWidget {\n    getTemplateCore = () => {\n        return `<div id=\"${this.id}\" class=\"ctab-widget-body\">\n                                        <input type=\"text\" id=\"${this.id}-cityInput\" style=\"width: 60%;float:left;\">\n                                        <button id=\"${this.id}-cityInputButton\" data-id=\"${this.id}\" style=\"font-size: 11px; width: 30%;float:left background-color: #eee; border-radius: 3px; border: 1px solid #ccc;\">Change<br> city</button>\n                                    <br>\n                                        <span id=\"${this.id}-output\" style=\"width: 100%; white-space: nowrap;\">Loading weather</span>\n                                    </div>`;\n    };\n\n    constructor(public id: number, public settings: weatherSettings, public backgroundColor: string, public textColor: string) {\n        super(id, settings, backgroundColor, textColor);\n    }\n}\n\nexport class LinkWidget extends TitleWidget {\n    constructor(public id: number, public settings: linkSettings, public backgroundColor: string, public textColor: string, public newTab: boolean) {\n        super(id, settings, backgroundColor, textColor);\n    }\n\n\n    private getTag = () => `<span style=\"line-height: 100%;\">${this.settings.title}</span>\n<a href=\"${this.settings.url}\" ${this.newTab ? 'target=\"_blank\"' : \"\"} id=\"${this.settings.title}\">\n    <span class=\"ctab-widget-link\"></span>\n</a>`;\n\n    getTemplateCore = () => {\n        return `<div id=\"${this.id}\" class=\"ctab-widget-body\"> \n                                        ${this.getTag()} \n                                    </div>`;\n    };\n\n    getConfig = () => {\n        return {\n            settings: this.settings,\n            backgroundColor: this.backgroundColor,\n            textColor: this.textColor,\n            id: this.id,\n            type: this.constructor.name\n        };\n    };\n}\n\nexport class ClockWidget extends CTabWidget {\n    getTemplateCore = () => {\n        return `<div id=\"${this.id}\" class=\"ctab-widget-body ctab-item-clock\"><span></span></div>`;\n    };\n\n    constructor(public id: number, public settings: baseSettings, public backgroundColor: string, public textColor: string) {\n        super(id, settings, backgroundColor, textColor);\n    }\n\n}\n\nexport class BuienradarWidget extends CTabWidget {\n    getTemplateCore = () => {\n        return `<div id=\"${this.id}\" class=\"ctab-widget-body\">\n                                        <IFRAME SRC=\"https://api.buienradar.nl/image/1.0/RadarMapNL?w=256&h=256\" NORESIZE SCROLLING=NO HSPACE=0 VSPACE=0 FRAMEBORDER=0 MARGINHEIGHT=0 MARGINWIDTH=0 WIDTH=256 HEIGHT=256></IFRAME>\n                                    </div>`;\n    };\n\n    constructor(public id: number, public settings: baseSettings, public backgroundColor: string, public textColor: string) {\n        super(id, settings, backgroundColor, textColor);\n    }\n}\n\nexport class NoteWidget extends TitleWidget {\n    getTemplateCore = () => {\n        return `<div id=\"${this.id}\" class=\"ctab-widget-body ctab-item-note\">\n                                        <textarea id=\"note-${this.id}\">${this.settings.title}</textarea>\n                                    </div>`;\n    };\n\n    constructor(public id: number, public settings: titleSettings, public backgroundColor: string, public textColor: string) {\n        super(id, settings, backgroundColor, textColor);\n    }\n}\n\n\nexport interface baseSettings {\n    width: number;\n    height: number;\n}\n\nexport interface weatherSettings extends baseSettings {\n    city: string;\n}\n\nexport interface titleSettings extends baseSettings {\n    title: string;\n}\n\nexport interface linkSettings extends titleSettings {\n    url: string;\n}\n\ninterface WidgetConstructor {\n    new (id: number, settings: baseSettings, backgroundColor: string, textColor: string): CTabWidget;\n}\n\nexport const cTabTypeMap: { [name: string]:  WidgetConstructor } = [BuienradarWidget, NoteWidget, ClockWidget, LinkWidget, WeatherWidget].reduce((acc, curr) => {\n    return acc[curr.name] = curr;\n}, {} as any);\n"]}