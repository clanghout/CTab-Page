{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["import grid from './gridControls';\nimport './settingsMenu';\nimport * as CtabWidgetTypes from './cTabWidgetType';\n\n(<any>window).browser = (() => {\n    return (<any>window).browser || (<any>window).chrome || (<any>window).msBrowser;\n})();\n\n\n// The toast box that can be used to show a message to the user.\nconst toastBox: HTMLElement | null = document.querySelector(\"#toast\");\nconst today = new Date();\nconst weekdays = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\nconst months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\nconst dateField: HTMLElement = document.querySelector('#currDate') as HTMLElement;\n    dateField.innerText = `${weekdays[today.getDay()]} ${today.getDate()} ${months[today.getMonth()]} ${today.getFullYear()}`;\n\nfunction showToast(message: string): void {\n    if (toastBox !== null) {\n        toastBox.innerText = message;\n        toastBox.classList.remove('hidden');\n        setTimeout(() => {\n            toastBox.classList.add(\"hidden\");\n        }, 2000);\n    }\n}\n\n\nlet CTabGrid = grid();\nCTabGrid.initialize();\n\n// Save the grid and show the result to user using toastBox.\nfunction saveGrid(): void {\n    const saveResult = CTabGrid.saveGrid();\n    showToast(saveResult);\n}\n\n\nconst saveButton: HTMLButtonElement = document.querySelector(\"#saveButton\") as HTMLButtonElement;\n    saveButton.addEventListener('click', saveGrid);\n\n\n/// Adding Widgets\nconst widgetTypeChanger: HTMLSelectElement = document.querySelector(\"#typeDropdown\") as HTMLSelectElement;\n\n// Show or hide the title and url input fields in the simple add area.\nfunction widgetTypeFieldVisibilityControl(showTitle: boolean, showUrl: boolean): void {\n    const hiddenClassName = \"hidden\";\n    let title = document.querySelector(\"#addTitle\");\n    let titleLabel = document.querySelector(\"#titleLabel\");\n    let url = document.querySelector(\"#addUrl\");\n    let urlLabel = document.querySelector(\"#urlLabel\");\n    if (title !== null && titleLabel !== null && url !== null && urlLabel !== null) {\n        let titleClassList = title.classList;\n        let titleLabelClassList = titleLabel.classList;\n        let urlClassList = url.classList;\n        let urlLabelClassList = urlLabel.classList;\n        if (showTitle) {\n            titleClassList.remove(hiddenClassName);\n            titleLabelClassList.remove(hiddenClassName);\n        } else {\n            titleClassList.add(hiddenClassName);\n            titleLabelClassList.add(hiddenClassName);\n        }\n        if (showUrl) {\n            urlClassList.remove(hiddenClassName);\n            urlLabelClassList.remove(hiddenClassName);\n        } else {\n            urlClassList.add(hiddenClassName);\n            urlLabelClassList.add(hiddenClassName);\n        }\n    }\n}\n\n\nif (widgetTypeChanger !== null) {\n    widgetTypeChanger.addEventListener('change', () => {\n        const curVal = widgetTypeChanger.value;\n\n        if (curVal === \"link\") {\n            widgetTypeFieldVisibilityControl(true, true);\n        }\n        if (curVal === \"buienradar\") {\n            widgetTypeFieldVisibilityControl(false, false);\n        }\n        if (curVal === \"clock\") {\n            widgetTypeFieldVisibilityControl(false, false);\n        }\n        if (curVal === \"note\") {\n            widgetTypeFieldVisibilityControl(true, false);\n        }\n        if (curVal === \"weather\") {\n            widgetTypeFieldVisibilityControl(false, false);\n        }\n    });\n}\n\n// New Add button\nconst addMenu: HTMLElement | null = document.querySelector('#addMenu');\nconst floatingAddButton: HTMLButtonElement | null = document.querySelector('#floatingAddButton');\nconst addCancelButton: HTMLButtonElement | null = document.querySelector('#addCancelButton');\nconst widgetAddButton: HTMLButtonElement | null = document.querySelector('#widgetAddButton');\n\n// Add the configured widget to the dashboard\nfunction addWidget(): void {\n    let title: HTMLInputElement | null = document.querySelector(\"#addTitle\");\n    let url: HTMLInputElement | null = document.querySelector(\"#addUrl\");\n    let bgcolor: HTMLInputElement | null = document.querySelector('#addBGC');\n    let textcolor: HTMLInputElement | null = document.querySelector('#addTC');\n\n    if (title !== null && url !== null && bgcolor !== null && textcolor !== null && widgetTypeChanger !== null && (title.value !== \"\" || widgetTypeChanger.value === \"clock\" || widgetTypeChanger.value === \"weather\" || widgetTypeChanger.value === \"buienradar\")) {\n        CTabGrid.simpleAdd(widgetTypeChanger.value, {width: 1, height: 1}, bgcolor.value, textcolor.value);\n        title.value = \"\";\n        url.value = \"\";\n\n        // Trigger hiding of the add window\n        if (addCancelButton !== null) {\n            addCancelButton.click();\n        }\n    } else {\n        showToast(\"Unable to add widget: A title is required.\");\n    }\n}\n\nif (addMenu !== null) {\n    addMenu.classList.add('hidden');\n}\nif (widgetAddButton !== null && floatingAddButton !== null && addMenu !== null && addCancelButton !== null) {\n    widgetAddButton.addEventListener('click', addWidget);\n    floatingAddButton.addEventListener('click', () => {\n        floatingAddButton.classList.add('hidden');\n        addMenu.classList.remove('hidden');\n    });\n    addCancelButton.addEventListener('click', () => {\n        floatingAddButton.classList.remove('hidden');\n        addMenu.classList.add('hidden');\n    });\n}\n\n// Accept the 'Enter' key as alternative to clicking on the 'Add' button with the mouse, when interacting with the 'addMenu'.\n// Doesn't work for the background/text backgroundColor selectors as the browser seems to override the 'Enter' key for it (i.e. opens the backgroundColor palette).\n['#typeDropdown', '#addTitle', '#addUrl', '#widgetAddButton'].forEach((item) => {\n    const itemElem: HTMLElement | null = document.querySelector(item);\n    if (itemElem !== null) {\n        itemElem.addEventListener('keydown', (e) => {\n            if (e.key === \"Enter\") {\n                addWidget();\n            }\n        });\n    }\n});\n\n\n/// Dev mode\nconst devConfigBox: HTMLDivElement | null = document.querySelector(\"#devConfig\");\nconst clearButton: HTMLButtonElement | null = document.querySelector(\"#clearButton\");\nconst debugButton: HTMLButtonElement | null = document.querySelector(\"#debugButton\");\nconst backupButton: HTMLButtonElement | null = document.querySelector(\"#backupButton\");\nconst devEnabledCheckbox: HTMLInputElement | null = document.querySelector(\"#devEnabled\");\nconst devOpacityButton: HTMLButtonElement | null = document.querySelector(\"#opacityButton\");\nconst configField: HTMLInputElement | null = document.querySelector(\"#configFieldInput\");\nconst devSaveButton: HTMLButtonElement | null = document.querySelector(\"#saveDevConfig\");\n//TODO: const loadBackupButton: HTMLButtonElement | null = document.querySelector('#loadBackupButton');\n\n// Show or hide developer mode specific buttons\nfunction devSwitch(displayStyle: string): void {\n    if (devConfigBox && clearButton && debugButton) {\n        devConfigBox.style.display = displayStyle;\n        devConfigBox.classList.remove(\"hidden\");\n        clearButton.style.display = displayStyle;\n        debugButton.style.display = displayStyle;\n    }\n    // document.querySelector(\"#widescreenButton\").style.display = displayStyle;\n}\n\n\n// disable dev mode by default\ndevSwitch('none');\n    clearButton!.addEventListener('click', () => CTabGrid.debug(true, false));\n    debugButton!.addEventListener('click', () => CTabGrid.debug(false, true));\n    backupButton!.addEventListener('click', saveCurrentConfig);\n    devEnabledCheckbox!.addEventListener('change', (a) => {\n        if (a !== null && a.srcElement !== null)\n            if ((<HTMLInputElement>a.srcElement).checked) {\n                devSwitch('block');\n            } else {\n                devSwitch('none');\n            }\n    });\n\ndevSaveButton!.addEventListener('click', () => {\n    let config = JSON.parse(configField!.value);\n    CTabGrid.setConfig(config);\n});\ndevOpacityButton!.addEventListener('click', () => {\n    let config = configField!.value;\n    configField!.value = config.replace(/(backgroundColor\":\"rgba\\([0-9]+,[0-9]+,[0-9]+,)([0-9.]+)((?=\\)\"))/gm, \"$1 0.5$3\");\n\n});\n\nconfigField!.value = prettyPrintConfig(CTabGrid.getConfig());\n\nconst streamSaver = (window as any).steamSaver;\n\nfunction saveCurrentConfig() {\n    const fileStream = streamSaver.createWriteStream('config.json');\n    const writer = fileStream.getWriter();\n    const encoder = new TextEncoder;\n    let data = JSON.stringify(CTabGrid.getConfig());\n    let uint8array = encoder.encode(data + \"\\n\\n\");\n\n    writer.write(uint8array);\n    writer.close();\n}\n\nfunction prettyPrintConfig(config: any): string {\n    if (config) {\n        let result = \"[\";\n        for (let i = 0; i < config.length; i++) {\n            result += i === 0 ? \"\\n\\t\" : \",\\n\\t\";\n            result += JSON.stringify(config[i]);\n        }\n        return result + \"\\n]\";\n    }\n    return \"\";\n}\n\n\n/// Chrome extension specific\ntry {\n    (<any>window).browser.commands.onCommand.addListener(saveGrid);\n\n    (<any>window).browser.bookmarks.onCreated.addListener(function (id: any, bookmark: any) {\n        console.log(\"id\", id);\n        console.log(\"bookmark\", bookmark);\n        CTabGrid.simpleAdd(\"LinkWidget\", {width: 1, height: 1, title: (bookmark.title as string), url: (bookmark.url as string)} as CtabWidgetTypes.linkSettings,\"#fff\", \"#000\");\n\n    });\n} catch (e) {\n    // not on chrome\n    console.log(\"Did not execute chrome extension specific code\");\n}\n"]}